<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>History Log</title>
    <style>
      body {
        font-family: Arial, sans-serif;
        margin: 20px;
      }
      h2 {
        text-align: center;
      }
      table {
        margin: auto;
        border-collapse: collapse;
        width: 50%;
        margin-top: 20px;
      }
      th,
      td {
        border: 1px solid #ccc;
        padding: 10px;
        text-align: center;
      }
    </style>
  </head>
  <body>
    <h2>Laptop History Log</h2>
    <button onclick="window.history.back()">Back</button>
    <table>
      <thead>
        <tr>
          <th>#</th>
          <th>User ID</th>
        </tr>
      </thead>
      <tbody id="history-log-body"></tbody>
    </table>

    <script>
      const API_BASE = "https://inventoryapptest-production.up.railway.app";

      async function loadHistoryLog() {
        const urlParams = new URLSearchParams(window.location.search);
        const pcNumber = urlParams.get("pcNumber");
        if (!pcNumber) return;
    
        try {
          const response = await fetch(`${API_BASE}/api/LapTop/${pcNumber}`);
          if (!response.ok) throw new Error("Failed to fetch laptop data");
    
          const laptop = await response.json();
          const history = laptop.historyLog || [];
    
          const tbody = document.getElementById("history-log-body");
          tbody.innerHTML = "";
    
          if (history.length === 0) {
            tbody.innerHTML = `<tr><td colspan="2">No history available</td></tr>`;
            return;
          }
    
          history.forEach((userID, index) => {
            const row = document.createElement("tr");
            row.innerHTML = `<td>${index + 1}</td><td>${userID}</td>`;
            tbody.appendChild(row);
          });
        } catch (error) {
          console.error("Error loading history log:", error);
        }
      }
    
      loadHistoryLog();
</script>
  </body>

</html>
